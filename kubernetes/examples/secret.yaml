# Example Secret
# Stores sensitive information like passwords, tokens, or keys
# Note: Values must be base64 encoded

apiVersion: v1
kind: Secret
metadata:
  name: app-secret
type: Opaque
data:
  # Base64 encoded values
  # username: admin (base64: YWRtaW4=)
  username: YWRtaW4=
  # password: secret123 (base64: c2VjcmV0MTIz)
  password: c2VjcmV0MTIz
  # api-key: abc123xyz (base64: YWJjMTIzeHl6)
  api-key: YWJjMTIzeHl6

---
# Example: Using ConfigMap and Secret in a Pod
apiVersion: v1
kind: Pod
metadata:
  name: app-with-config
spec:
  containers:
  - name: app
    image: nginx:1.25-alpine
    env:
      # Environment variables from ConfigMap
      - name: APP_NAME
        valueFrom:
          configMapKeyRef:
            name: app-config
            key: app.name
      - name: APP_ENV
        valueFrom:
          configMapKeyRef:
            name: app-config
            key: app.environment
      # Environment variables from Secret
      - name: USERNAME
        valueFrom:
          secretKeyRef:
            name: app-secret
            key: username
      - name: PASSWORD
        valueFrom:
          secretKeyRef:
            name: app-secret
            key: password
    volumeMounts:
      # Mount ConfigMap as file
      - name: config-volume
        mountPath: /etc/nginx/conf.d
      # Mount Secret as file
      - name: secret-volume
        mountPath: /etc/secrets
        readOnly: true
  volumes:
    - name: config-volume
      configMap:
        name: app-config
        items:
          - key: nginx.conf
            path: default.conf
    - name: secret-volume
      secret:
        secretName: app-secret
